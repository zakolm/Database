# Лабораторная работа № 1

## Создание базы данных и наполнение ее тестовыми данными

### Задание

1. Самостоятельно выбрать предметную область и разработать логический макет реляционной базы данных, состоящей из 4-х таблиц – трех «родительских» и одной «дочерней». Родительские таблицы соответствуют сущностям ER-модели, дочерняя таблица соответствует связи ER-модели и реализует тернарное отношение типа «многие-ко-многим». Прототипом разрабатываемой базы данных может служить учебная база данных «Поставщики, детали и проекты», условно идентифицируемая именем dbSPJ.  Для каждой из родительских таблиц определить по одному суррогатному ключу IDENTITY(1,1). Дочерняя таблица должна содержать дополнительные атрибуты, чтобы не превратиться в три внешних ключа.

2. Написать программу (консольное приложение), которая автоматически генерирует относительно правдоподобные тестовые данные для всех четырех таблиц базы данных. Количество записей – не менее 1000 на каждую таблицу. При выполнении данного пункта руководствоваться указаниями в файле «Автоматическое генерирование тестовых данных».

3. Создать три сценария на Transact-SQL:
    
    a. Сценарий создания базы данных и базовых таблиц,
  
    b. Сценарий определения ограничений,
  
    c. Сценарий массированного копирования данных в базу данных.
       **При выполнении данного пункта ознакомиться со сценариями создания учебной базы данных  dbSPJ из папки  «SPJ». Общие сведения о сценариях приведены в файле «Сценарии».**

4. Последовательно выполнить сценарии (запустить сценарии на выполнение) двумя способами:
  
    a. С помощью SQL Server Management Studio,
  
    b. С командной строки (SQLCMD.exe)

5. Построить диаграмму базы данных в среде SQL Server Management Studio. 

#### Примечания.

1. При создании сценария (сценариев) создания базы данных, объектов базы данных (таблиц, ограничений, правил и умолчаний) следует руководствоваться следующими инструкциями Transact-SQL.

**Создание новой базы данных и файлов, используемых для ее хранения
Инструкция CREATE DATABASE (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms176061(v=sql.105).aspx 

**Создание новой таблицы в базе данных
Инструкция CREATE TABLE (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms174979(v=sql.105).aspx 

**Изменение определения таблицы путем изменения, добавления или удаления столбцов и ограничений 
Инструкция ALTER TABLE (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms190273(v=sql.105).aspx 

**Создание объекта, называемого правилом
Инструкция CREATE RULE (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms188064(v=sql.105).aspx

**Привязывание правила к столбцу таблицы
Системная хранимая процедура sp_bindrule (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms176063(v=sql.105).aspx

**Создание объекта «Значение по умолчанию»
Инструкция CREATE DEFAULT (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms173565(v=sql.105).aspx

**Привязывание значения по умолчанию к столбцу таблицы
Системная хранимая процедура sp_bindefault (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms177503(v=sql.105).aspx

**Импорт файла данных в таблицу базы данных в формате, указанном пользователем
Инструкция BULK INSERT (Transact-SQL):**

http://msdn.microsoft.com/ru-ru/library/ms188365(v=sql.105).aspx 

2. При создании таблиц базы данных следует руководствоваться следующими типами данных.

    • Точные числа: bigint int smallint tinyint bit decimal numeric money smallmoney 

    • Приблизительные числа: float real            

    • Дата и время: date, datetime2,  datetime, datetimeoffset, smalldatetime, time

    • Символьные строки: char   varchar text 

    • Символьные строки в Юникоде: nchar     nvarchar ntext 

    • Двоичные данные: binary   varbinary image 

    • Прочие типы данных: cursor, hierarchyid, sql_variant, table, timestamp, uniqueidentifier, xml


В зависимости от параметров хранения, некоторые типы данных в SQL Server относятся к следующим группам:

    • типы данных больших значений: varchar(max), nvarchar(max) и varbinary(max); 

    • типы данных больших объектов: text, ntext, image, varchar(max), nvarchar(max), varbinary(max) и xml.


##### См. также http://msdn.microsoft.com/ru-ru/library/ms187752(v=sql.105).aspx

3. Пример выполнения лабораторной работы находится в папке «LAB1».

4. Описание учебной базы данных находится в папке «SPJ».
